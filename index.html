<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jura Blitz</title>
    <style>
        :root {
            --bg: #000000;
            --card: #1C1C1E;
            --text: #FFFFFF;
            --green: #30D158;
            --red: #FF453A;
            --blue: #0A84FF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Top Bar: Time & Score */
        .header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 20px;
            font-weight: 700;
            z-index: 10;
        }

        .timer-bar {
            position: absolute;
            top: 0; left: 0;
            height: 6px;
            background: var(--blue);
            width: 100%;
            transition: width 0.1s linear;
        }

        /* Game Area */
        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .card-stack {
            position: relative;
            width: 100%;
            max-width: 380px;
            height: 450px;
        }

        .card {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--card);
            border-radius: 24px;
            padding: 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            border: 1px solid #333;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .term {
            font-size: 14px;
            text-transform: uppercase;
            color: #888;
            margin-bottom: 20px;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .question {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 30px;
            line-height: 1.3;
        }

        .divider {
            width: 40px;
            height: 4px;
            background: #333;
            border-radius: 2px;
            margin-bottom: 30px;
        }

        .definition {
            font-size: 18px;
            line-height: 1.5;
            color: #DDD;
        }

        /* Overlay Feedback */
        .feedback-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            font-size: 100px;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
        }
        .feedback-overlay.show { opacity: 1; transform: translate(-50%, -50%) scale(1); }

        /* Buttons */
        .controls {
            display: flex;
            width: 100%;
            max-width: 380px;
            gap: 20px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .btn {
            flex: 1;
            height: 70px;
            border-radius: 20px;
            border: none;
            font-size: 20px;
            font-weight: 800;
            cursor: pointer;
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:active { transform: scale(0.95); }
        
        .btn-false { background: #2C2C2E; color: var(--red); border: 2px solid var(--red); }
        .btn-true { background: var(--green); color: black; }

        /* Screens */
        .screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(20px);
            z-index: 200;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .hidden { display: none; }

        h1 { font-size: 40px; margin-bottom: 10px; background: linear-gradient(to right, var(--blue), var(--green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .start-btn {
            margin-top: 40px;
            background: white;
            color: black;
            padding: 15px 50px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: 700;
            border: none;
        }

        .stat-box {
            background: #1C1C1E;
            padding: 20px;
            border-radius: 16px;
            min-width: 200px;
            margin: 10px;
        }
        
    </style>
</head>
<body>

    <div class="timer-bar" id="timerBar"></div>
    <div class="header">
        <span id="scoreDisplay">Score: 0</span>
        <span id="timeLeft">60s</span>
    </div>

    <div id="iconCheck" class="feedback-overlay">✅</div>
    <div id="iconX" class="feedback-overlay">❌</div>

    <div class="game-area">
        <div class="card-stack" id="cardContainer">
            </div>
    </div>

    <div class="controls">
        <button class="btn btn-false" onclick="handleInput(false)">
            <span>TRASH</span> (Falsch)
        </button>
        <button class="btn btn-true" onclick="handleInput(true)">
            (Richtig) <span>MATCH</span>
        </button>
    </div>

    <div id="startScreen" class="screen">
        <h1>Jura Blitz</h1>
        <p style="font-size: 18px; color: #888;">60 Sekunden.</p>
        <p style="font-size: 18px; color: #888;">Ist die Aussage Richtig oder Falsch?</p>
        <button class="start-btn" onclick="startGame()">Starten</button>
    </div>

    <div id="endScreen" class="screen hidden">
        <h1>Zeit abgelaufen!</h1>
        <div class="stat-box">
            <div style="color: #888; font-size: 14px;">Dein Score</div>
            <div style="font-size: 40px; font-weight: 800;" id="finalScore">0</div>
        </div>
        <p id="highScoreText" style="color: var(--green); font-weight: bold; margin-top: 10px;"></p>
        <button class="start-btn" onclick="startGame()">Nochmal</button>
    </div>

    <script>
        // DATEN (Kategorisiert für intelligenten Tausch)
        // Gruppe 1: Definitionen
        const poolDefinitions = [
            { q: "Systematische Auslegung", a: "Feststellen des Aussagegehaltes anhand der Stellung im Gesetz." },
            { q: "Historische Auslegung", a: "Ermittlung des Willens des historischen Gesetzgebers (Materialien)." },
            { q: "Verfassungskonforme Auslegung", a: "Wahl der Deutung, die mit dem GG vereinbar ist." },
            { q: "Richtlinienkonforme Auslegung", a: "Auslegung für bestmögliches Erreichen des Richtlinienziels." },
            { q: "Anstalt (Öff. Recht)", a: "Zusammenfassung von Mitteln, die Benutzern zur Verfügung steht." },
            { q: "Körperschaft", a: "Mitgliedschaftlich organisierter Hoheitsträger." },
            { q: "Stiftung", a: "Zusammenfassung von Vermögen für einen Stiftungszweck." },
            { q: "Final gefasste Norm", a: "Gibt ein Ziel oder eine Rechtsfolge vor (z.B. § 87 TKG)." },
            { q: "Konditional gefasste Norm", a: "Wenn-Dann-Schema (z.B. § 110 TKG)." },
            { q: "Deskriptive Norm", a: "Beschreibung eines Begriffs (Definition)." },
            { q: "Verwaltungsakt", a: "Maßnahme einer Behörde zur Regelung eines Einzelfalls mit Außenwirkung." }
        ];

        // Gruppe 2: Fakten & Regeln
        const poolFacts = [
            { q: "Veröffentlichung Gesetze", a: "Im Bundesgesetzblatt." },
            { q: "Rechtsweg § 40 VwGO", a: "Öffentlich-rechtliche Streitigkeit nichtverfassungsrechtlicher Art." },
            { q: "Klagebefugnis § 42 II VwGO", a: "Möglichkeit der Verletzung in subjektiven Rechten." },
            { q: "Widerspruch", a: "Vorgeschalteter Rechtsbehelf nach § 68 VwGO." },
            { q: "Wohnungsschutz (Geschäft)", a: "Voller Schutz nur nach Ladenschluss." },
            { q: "Grundrechte für Staat?", a: "Nein (Konfusionsargument), außer Rundfunkfreiheit." },
            { q: "Rundfunkrat: Staatsferne", a: "Maximal 1/3 staatliche Mitglieder." },
            { q: "Kompetenz Corona-Notbremse", a: "Bund (Art. 74 GG, gemeingefährliche Krankheiten)." },
            { q: "EU-Richtlinien Wirkung", a: "Unmittelbar nur wenn Frist abgelaufen & begünstigend." },
            { q: "Widerruf § 25 PBefG", a: "Erfordert Unzuverlässigkeit (negative Zukunftsprognose)." },
            { q: "Amtshaftung § 839 BGB", a: "Setzt Verletzung einer drittgerichteten Amtspflicht voraus." }
        ];

        let currentRound = null; // { q, a, isCorrect }
        let score = 0;
        let timeLeft = 60;
        let gameInterval;
        let isPlaying = false;
        let highScore = localStorage.getItem('juraHighScore') || 0;

        function startGame() {
            score = 0;
            timeLeft = 60;
            isPlaying = true;
            document.getElementById('scoreDisplay').innerText = "Score: 0";
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.add('hidden');
            
            // Timer starten
            clearInterval(gameInterval);
            gameInterval = setInterval(tick, 100);
            
            nextCard();
        }

        function tick() {
            if (!isPlaying) return;
            timeLeft -= 0.1;
            document.getElementById('timeLeft').innerText = Math.ceil(timeLeft) + "s";
            document.getElementById('timerBar').style.width = (timeLeft / 60 * 100) + "%";

            if (timeLeft <= 0) {
                endGame();
            }
        }

        function endGame() {
            isPlaying = false;
            clearInterval(gameInterval);
            
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('juraHighScore', highScore);
                document.getElementById('highScoreText').innerText = "Neuer Highscore!";
            } else {
                document.getElementById('highScoreText').innerText = "Highscore: " + highScore;
            }

            document.getElementById('finalScore').innerText = score;
            document.getElementById('endScreen').classList.remove('hidden');
        }

        function nextCard() {
            const container = document.getElementById('cardContainer');
            container.innerHTML = ""; // Clear old card

            // Zufallsauswahl des Pools (damit sich ähnliche Fragen mischen)
            const pool = Math.random() > 0.5 ? poolDefinitions : poolFacts;
            
            // Zufälliges Frage-Paar wählen
            const correctIndex = Math.floor(Math.random() * pool.length);
            const correctPair = pool[correctIndex];

            // Entscheiden: Richtig oder Falsch anzeigen?
            const showCorrect = Math.random() > 0.5;
            let displayedAnswer = correctPair.a;

            if (!showCorrect) {
                // Falsche Antwort generieren
                let wrongIndex;
                do {
                    wrongIndex = Math.floor(Math.random() * pool.length);
                } while (wrongIndex === correctIndex); // Sicherstellen, dass es nicht zufällig doch die richtige ist
                
                displayedAnswer = pool[wrongIndex].a;
            }

            currentRound = {
                correct: showCorrect
            };

            // Karte rendern
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="term">Begriff / Frage</div>
                <div class="question">${correctPair.q}</div>
                <div class="divider"></div>
                <div class="term">Definition / Antwort</div>
                <div class="definition">${displayedAnswer}</div>
            `;
            
            // Animation In
            card.style.transform = "scale(0.8) translateY(50px)";
            card.style.opacity = "0";
            container.appendChild(card);
            
            requestAnimationFrame(() => {
                card.style.transform = "scale(1) translateY(0)";
                card.style.opacity = "1";
            });
        }

        function handleInput(userSaidTrue) {
            if (!isPlaying) return;

            const isActuallyCorrect = currentRound.correct;
            const userIsRight = (userSaidTrue === isActuallyCorrect);

            // Feedback Visuals
            const feedbackEl = userIsRight ? document.getElementById('iconCheck') : document.getElementById('iconX');
            feedbackEl.classList.add('show');
            setTimeout(() => feedbackEl.classList.remove('show'), 400);

            const card = document.querySelector('.card');

            if (userIsRight) {
                score += 10; // Punkte
                // Swipe Animation Right/Left based on button
                card.style.transform = `translateX(${userSaidTrue ? 100 : -100}%) rotate(${userSaidTrue ? 10 : -10}deg)`;
            } else {
                score -= 5; // Strafe
                timeLeft -= 2; // Zeitstrafe!
                card.style.border = "2px solid red";
                // Shake Animation
                card.style.transform = "translateX(10px)";
                setTimeout(() => card.style.transform = "translateX(-10px)", 50);
                setTimeout(() => card.style.transform = "translateX(0)", 100);
            }
            
            card.style.opacity = "0";
            document.getElementById('scoreDisplay').innerText = "Score: " + score;

            // Nächste Karte kurz verzögert
            setTimeout(() => {
                nextCard();
            }, 150);
        }

    </script>
</body>
</html>
